<div class="col-xs-12 col-sm-8 idea-main">
  <h2><a ui-sref="detail({ id: idea.id })">{{ idea.title }}</a></h2>
  <p>
    <a ng-repeat="tag in idea.tags" ui-sref="tags.detail({ id: tag.id })" class="label label-primary">{{ tag.text }}</a>
  </p>
  <p>{{ idea.description }}</p>
  <div ng-if="!idea.detailed">
    <h2>
      <a ng-href="{{ '#/ideas/' + idea.id }}#attachments">
        <span class="glyphicon glyphicon-paperclip"></span>
        <!-- Create a pluralize directive: takes in an int != 1 adds an s to a word -->
        {{ idea.attachments.length || 0 }} Attachment<span ng-show="idea.attachments.length != 1">s</span>
      </a>
    </h2>
  </div>
  <div ng-if="idea.detailed">
    <h2>
      <span class="glyphicon glyphicon-paperclip"></span>
      {{ idea.attachments.length || 0 }} Attachment<span ng-show="idea.attachments.length != 1">s</span>
    </h2>
    <ul class="list-group">
      <li class="list-group-item" ng-repeat="file in idea.attachments">
        <a href="{{file.url}}">{{ file.name }}</a>
        <p>{{ file.description }}</p>
      </li>
    </ul>
  </div>
  <div ng-if="!idea.detailed">
    <h2>
      <a ng-href="{{ '#/ideas/' + idea.id }}#comments">
        <span class="glyphicon glyphicon-comment"></span>
        {{ idea.comments.length || 0 }} Comment<span ng-show="idea.comments.length != 1">s</span>
      </a>
    </h2>
  </div>
  <div ng-if="idea.detailed">
    <comments idea-id="{{idea.id}}" comments="idea.comments"></comments>
  </div>
</div>

<div class="col-xs-12 col-sm-4 idea-meta">
  <button class="btn btn-circle btn-success btn-lg" ng-click="submitVote(idea.id);" ng-hide="hasVoted(idea)">
    <span class="glyphicon glyphicon-plus"></span>
  </button>
  <button class="btn btn-circle btn-warning btn-lg" ng-click="removeVote(idea.id);" ng-show="hasVoted(idea)">
    <span class="glyphicon glyphicon-remove"></span>
  </button>
  <p ng-hide="hasVoted(idea)">Vote for this idea</p>
  <p ng-show="hasVoted(idea)">Remove your vote</p>
  <hr>
  <p>{{ idea.score.length }} vote<span ng-show="idea.score.length != 1">s</span> so far</p>
  <hr>
  <p>Status: {{ idea.status }}</p>
</div>

<div class="idea-creator col-xs-12">
  <p>Posted by: <a ui-sref="user-detail({ id: idea.creator.id })">{{ idea.creator.name }}</a> on {{ idea.createdAt | date: 'longDate' }}</p>
</div>
